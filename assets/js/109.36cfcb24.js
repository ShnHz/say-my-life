(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{706:function(t,a,s){"use strict";s.r(a);var e=s(24),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blog-js-CanvasRhodesIsland"),t._v(" "),s("h3",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("先来看看官网的效果 "),s("a",{attrs:{href:"https://ak.hypergryph.com/#world",target:"_blank",rel:"noopener noreferrer"}},[t._v("传送门"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("很明显使用了 "),s("code",{staticClass:"default"},[t._v("canvas2d")]),t._v(" 中的 "),s("strong",[t._v("像素操作")])]),t._v(" "),s("h3",{attrs:{id:"实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[t._v("#")]),t._v(" 实现")]),t._v(" "),s("p",[t._v("首先分析这个动画效果是如何实现的，我们可以简单分为三个步骤：")]),t._v(" "),s("ul",[s("li",[t._v("01.解析图片转换为粒子")]),t._v(" "),s("li",[t._v("02.绘制时添加动画")]),t._v(" "),s("li",[t._v("03.根据鼠标位置对粒子进行排斥")])]),t._v(" "),s("p",[t._v("解析图片通过"),s("code",{staticClass:"default"},[t._v("Canvas")]),t._v("的"),s("code",{staticClass:"default"},[t._v("getImageData")]),t._v("获取像素数据实现。")]),t._v(" "),s("p",[t._v("较难点在于 "),s("strong",[t._v("绘制动画")]),t._v(" 和 "),s("strong",[t._v("粒子排斥")]),t._v("，涉及到 "),s("code",{staticClass:"default"},[t._v("数学应用 和 动画/交互逻辑")]),t._v("。")]),t._v(" "),s("p",[t._v("我们这边简单说一下 "),s("strong",[t._v("粒子排斥")]),t._v(" 的一个数学算法（也可能是最难的一部分），其余具体的实现可以看 "),s("a",{attrs:{href:"https://juejin.cn/post/7160491044222533639",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"粒子排斥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#粒子排斥"}},[t._v("#")]),t._v(" 粒子排斥")]),t._v(" "),s("p",[t._v("明显观察到画布会"),s("strong",[t._v("以鼠标为中心对粒子进行一定范围的排斥")]),t._v("，越接近中心排斥的速度越快。")]),t._v(" "),s("p",[t._v("我们可以向"),s("code",{staticClass:"default"},[t._v("particle")]),t._v("对象的"),s("code",{staticClass:"default"},[t._v("update")]),t._v("方法中传入鼠标在"),s("code",{staticClass:"default"},[t._v("canvas")]),t._v("画布中的位置"),s("code",{staticClass:"default"},[t._v("mouseX, mouseY")]),t._v("。")]),t._v(" "),s("p",[t._v("并结合粒子当前位置"),s("code",{staticClass:"default"},[t._v("(x, y)")]),t._v(" 和 排斥力度"),s("code",{staticClass:"default"},[t._v("Inten")]),t._v(" 重新计算移动速度"),s("code",{staticClass:"default"},[t._v("vx、vy")]),t._v("。由此使粒子不断远离中心。")]),t._v(" "),s("h5",{attrs:{id:"设计方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计方案"}},[t._v("#")]),t._v(" 设计方案")]),t._v(" "),s("ul",[s("li",[t._v("01.设置固定值 "),s("code",{staticClass:"default"},[t._v("Radius")]),t._v("(斥力影响范围)、"),s("code",{staticClass:"default"},[t._v("Inten")]),t._v("(斥力标准值)。")]),t._v(" "),s("li",[t._v("02.设置鼠标位置 "),s("code",{staticClass:"default"},[t._v("(mouseX, mouseY)")]),t._v(" 为斥力中心。")]),t._v(" "),s("li",[t._v("03.计算每个粒子与中心的 直线距离"),s("code",{staticClass:"default"},[t._v("distance")]),t._v("。")]),t._v(" "),s("li",[t._v("04.通过 "),s("code",{staticClass:"default"},[t._v("Radius / distance")]),t._v(" 获得 中心影响范围 与 直线距离 的比例"),s("code",{staticClass:"default"},[t._v("disPercent")]),t._v("。"),s("strong",[t._v("比例越大越接近中心，受到的斥力也越大")])]),t._v(" "),s("li",[t._v("05.将粒子与中心形成的 "),s("code",{staticClass:"default"},[t._v("夹角angle")]),t._v("、"),s("code",{staticClass:"default"},[t._v("比例disPercent")]),t._v("和"),s("code",{staticClass:"default"},[t._v("斥力值Inten")]),t._v("，转换为粒子x、y轴的速度"),s("code",{staticClass:"default"},[t._v("repX、repY")]),t._v("。")]),t._v(" "),s("li",[t._v("06."),s("code",{staticClass:"default"},[t._v("vx += repX & vy += repY")]),t._v("，粒子逐渐远离中心。")])]),t._v(" "),s("h3",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("h6",{attrs:{id:"canvas实战】仿明日方舟logo粒子动画-vue3-ts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvas实战】仿明日方舟logo粒子动画-vue3-ts"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://juejin.cn/post/7160491044222533639",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canvas实战】仿明日方舟Logo粒子动画 vue3+ts"),s("OutboundLink")],1)])],1)}),[],!1,null,null,null);a.default=v.exports}}]);