(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{353:function(e,t,a){},460:function(e,t,a){"use strict";var l=a(353);a.n(l).a},523:function(e,t,a){"use strict";a.r(t);a(129),a(25),a(46),a(45),a(63);var l=a(62),n=a(191),o={props:{visible:{type:Boolean,default:!1},data:{type:Object,default:null}},data:function(){return{show:null,form:{id:null,name:"",introduction:"",items:[{content:"",delayed:!1,deleted:!1,value:0}]}}},computed:{title:function(){return this.data?"编辑计划 - ".concat(this.data.name):"添加新计划"}},watch:{visible:{immediate:!0,deep:!0,handler:function(e){this.show=e,this.show&&this.data&&(this.form=Object(n.cloneDeep)(this.data),this.form.items=this.form.items.map((function(e){return 0==e.value?Object(l.a)({},e,{value:0}):1==e.value&&0==e.delayed&&0==e.deleted?Object(l.a)({},e,{value:1}):1==e.value&&1==e.delayed&&0==e.deleted?Object(l.a)({},e,{value:2}):1==e.value&&0==e.delayed&&1==e.deleted?Object(l.a)({},e,{value:3}):void 0})))}}},methods:{addItems:function(){this.form.items.push({content:"",delayed:!1,deleted:!1,value:0})},remove:function(e){this.form.items=this.form.items.filter((function(t,a){return e!=a}))},close:function(){this.form={id:null,name:"",introduction:"",items:[{content:"",delayed:!1,deleted:!1,value:0}]},this.$emit("close")},confirm:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;var a=Object(n.cloneDeep)(e.form);a.id||(a.id="plan".concat(e.form.name).concat((new Date).getTime()+Math.round(1e4*Math.random()))),a.items=a.items.map((function(e,t){switch(e.value){case 0:return Object(l.a)({},e,{value:!1,delayed:!1,deleted:!1,id:"plan".concat(a.name).concat(t)});case 1:return Object(l.a)({},e,{value:!0,delayed:!1,deleted:!1,id:"plan".concat(a.name).concat(t)});case 2:return Object(l.a)({},e,{value:!0,delayed:!0,deleted:!1,id:"plan".concat(a.name).concat(t)});case 3:return Object(l.a)({},e,{value:!0,delayed:!1,deleted:!0,id:"plan".concat(a.name).concat(t)})}})),e.$http.post("http://localhost:3000/plan/edit",a).then((function(t){e.$emit("close"),e.$emit("confirm")}))}))}}},i=(a(460),a(24)),c=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.show,width:"600px"},on:{"update:visible":function(t){e.show=t},close:e.close}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-info"}),e._v(" "+e._s(e.title)+"\n    ")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,size:"small"}},[a("el-form-item",{attrs:{prop:"name",label:"计划名称",rules:[{required:!0,message:"请输入计划名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"计划简介"}},[a("el-input",{model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),e._l(e.form.items,(function(t,l){return a("el-form-item",{key:"form-item-"+l},[a("template",{slot:"label"},[a("span",[e._v("\n                    "+e._s("计划内容"+(l+1))+"\n                ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",circle:""},on:{click:function(t){return e.remove(l)}}})],1),e._v(" "),a("el-input",{model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}}),e._v(" "),a("el-radio-group",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[a("el-radio",{attrs:{label:0}},[e._v("待定")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("完成")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("延迟完成")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("失败")])],1)],2)}))],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addItems}},[e._v("新增内容")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("确 定")])],1)],2)}),[],!1,null,"4b58ac09",null);t.default=c.exports}}]);