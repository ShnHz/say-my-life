(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{480:function(t,e,r){},587:function(t,e,r){"use strict";var o=r(480);r.n(o).a},648:function(t,e,r){"use strict";r.r(e);r(129),r(93),r(95),r(46),r(45),r(13),r(20),r(47),r(96),r(193),r(94);var o=r(62),a=r(586),l=r(437),i=r.n(l),s={data:function(){return{linkOptions:[],form:{forward:!1,articLink:"",title:"文章标题",summary:"",date:(new Date).Format("yyyy/MM/dd hh:mm:ss"),valine:!0,valineId:"",link:[],linkCus:"",tag:[],top:!1,dir:!0,dirTag:["h3","h4","h5"],password:!1,passwordCus:""}}},mounted:function(){this.linkOptions=this.initLinkOptions()},methods:{initLinkOptions:function(){var t=this.$site.pages.map((function(t){var e=t.regularPath.split("/");return e.pop(),e.shift(),e})),e={};return t.forEach((function(t){if(t.length){var r=function t(e,r){var o=r.shift();o&&(e[o]={},r.length&&t(e[o],r));return e}({},t);e=Object(a.merge)(e,r)}})),function t(e,r){var o=[];for(var a in e)if("{}"==JSON.stringify(e[a])&&o.push({value:a,label:a}),"[object Object]"==Object.prototype.toString(e[a])){var l=t(e[a],a);l.children.length>0&&o.push(l)}return{value:r,label:r,children:o}}(e).children},reset:function(){this.form={forward:!1,articLink:"",title:"文章标题",summary:"",date:(new Date).Format("yyyy/MM/dd hh:mm:ss"),valine:!0,valineId:"",link:[],linkCus:"",tag:[],top:!1,dir:!0,dirTag:["h3","h4","h5"],password:!1,passwordCus:""}},submit:function(){console.log("submit"),this.form.forward?this.forward():this.create()},create:function(){var t=this,e=this.form.linkCus?this.form.linkCus:"/".concat(this.form.link.join("/"));this.$http.post("http://localhost:3000/create/page",Object(o.a)({},this.form,{link:e,passwordCus:this.form.passwordCus?i()(this.form.password):""}),{nprogress:!1}).then((function(r){t.$message({showClose:!0,message:"成功创建文件，文件路径：".concat(e,"/").concat(r.data.fileName),duration:0})}))},forward:function(){var t=this,e=this.form.linkCus?this.form.linkCus:"/".concat(this.form.link.join("/"));this.$http.post("http://localhost:3000/forward/page",Object(o.a)({},this.form,{link:e,passwordCus:this.form.passwordCus?i()(this.form.password):""}),{nprogress:!1}).then((function(r){t.$message({showClose:!0,message:"成功创建文件，文件路径：".concat(e,"/").concat(r.data.fileName),duration:0})}))}}},n=(r(587),r(24)),m=Object(n.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"view-create-wrap"},[r("h2",[t._v("创建文章")]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"left"}},[r("el-form-item",{attrs:{label:"转发文章"}},[r("el-switch",{model:{value:t.form.forward,callback:function(e){t.$set(t.form,"forward",e)},expression:"form.forward"}})],1),t._v(" "),t.form.forward?t._e():r("el-form-item",{attrs:{label:"文章名称"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),t.form.forward?r("el-form-item",{attrs:{label:"转发文章路径"}},[r("el-input",{model:{value:t.form.articLink,callback:function(e){t.$set(t.form,"articLink",e)},expression:"form.articLink"}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"文章简介"}},[r("el-input",{model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"创建时间"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy/MM/dd hh:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"文章路径"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{filterable:"",options:t.linkOptions,props:{expandTrigger:"hover"},disabled:""!=t.form.linkCus},model:{value:t.form.link,callback:function(e){t.$set(t.form,"link",e)},expression:"form.link"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"文章路径自定义"}},[r("el-input",{attrs:{placeholder:"例：/views/blog"},model:{value:t.form.linkCus,callback:function(e){t.$set(t.form,"linkCus",e)},expression:"form.linkCus"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"文章标签"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择",filterable:""},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}},t._l(t.$site.themeConfig.tagList,(function(t){return r("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"评论系统"}},[r("el-switch",{model:{value:t.form.valine,callback:function(e){t.$set(t.form,"valine",e)},expression:"form.valine"}})],1),t._v(" "),t.form.valine?r("el-form-item",{attrs:{label:"评论自定义ID"}},[r("el-input",{model:{value:t.form.valineId,callback:function(e){t.$set(t.form,"valineId",e)},expression:"form.valineId"}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"是否置顶"}},[r("el-switch",{model:{value:t.form.top,callback:function(e){t.$set(t.form,"top",e)},expression:"form.top"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"是否目录"}},[r("el-switch",{model:{value:t.form.dir,callback:function(e){t.$set(t.form,"dir",e)},expression:"form.dir"}})],1),t._v(" "),t.form.dir?r("el-form-item",{attrs:{label:"目录监听标题"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择",filterable:""},model:{value:t.form.dirTag,callback:function(e){t.$set(t.form,"dirTag",e)},expression:"form.dirTag"}},t._l(["h1","h2","h3","h4","h5","h6"],(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"开启密码"}},[r("el-switch",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),t.form.password?r("el-form-item",{attrs:{label:"自定义密码"}},[r("el-input",{attrs:{maxlength:"4",placeholder:"输入四位数密码/默认为全局默认密码"},model:{value:t.form.passwordCus,callback:function(e){t.$set(t.form,"passwordCus",e)},expression:"form.passwordCus"}})],1):t._e(),t._v(" "),r("el-form-item",[r("el-button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("立即创建")])],1)],1)],1)}),[],!1,null,"2edb133f",null);e.default=m.exports}}]);